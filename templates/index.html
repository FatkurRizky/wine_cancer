<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wine Quality Prediction</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />

  <style>
    /* Custom Scrollbar */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #1f2937; }
    ::-webkit-scrollbar-thumb { background: #0d9488; border-radius: 4px; }
  </style>
</head>

<body class="bg-gray-900 text-white font-sans antialiased overflow-x-hidden">
  
  <nav class="fixed w-full z-50 bg-gray-900/80 backdrop-blur-md border-b border-white/10">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8" data-aos="fade-down">
      <div class="relative flex h-16 items-center justify-between">
        <div class="flex items-center">
          <img src="https://img.icons8.com/color/48/wine-bottle.png" alt="Logo" class="h-8 w-auto mr-3" />
          <span class="font-bold text-xl tracking-wider text-teal-400">WineAI</span>
        </div>
        <div class="hidden sm:block">
          <div class="flex space-x-4">
            <a href="/" class="rounded-md bg-teal-500/10 px-3 py-2 text-sm font-medium text-teal-400 border border-teal-500/50">Dashboard</a>
            <a href="#predict-section" class="rounded-md px-3 py-2 text-sm font-bold text-gray-300 hover:text-white hover:bg-white/10 transition">Predict</a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <div class="container min-h-screen mx-auto px-6 pt-28 pb-12 flex flex-col items-center">
    
    <div class="text-center max-w-3xl space-y-4 mb-10" data-aos="fade-up">
      <h2 class="text-4xl md:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-blue-500">
        Machine Learning <br> Wine Quality
      </h2>
      <p class="text-gray-400 font-light leading-relaxed text-lg px-4">
        Sistem komparasi prediksi kualitas wine menggunakan algoritma <br class="hidden md:block">
        <span class="text-teal-400 font-semibold">Naive Bayes</span> vs <span class="text-blue-400 font-semibold">Decision Tree</span>.
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-16" data-aos="zoom-in">
        <div class="bg-gray-800 border border-teal-500/30 p-4 rounded-xl shadow-lg flex items-center space-x-4">
            <div class="text-center" data-aos="fade-left" data-aos-duration="1000">
                <p class="text-xs text-gray-500 uppercase font-bold tracking-widest">Naive Bayes</p>
                <p class="text-2xl font-bold text-teal-400">{{ acc_nb }}%</p>
            </div>
            <span class="relative flex h-3 w-3">
              <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-teal-400 opacity-75"></span>
              <span class="relative inline-flex rounded-full h-3 w-3 bg-teal-500"></span>
            </span>
        </div>
        <div class="bg-gray-800 border border-blue-500/30 p-4 rounded-xl shadow-lg flex items-center space-x-4">
            <div class="text-right" data-aos="fade-right" data-aos-duration="1000">
                <p class="text-xs text-gray-500 uppercase font-bold tracking-widest">Decision Tree</p>
                <p class="text-2xl font-bold text-blue-400">{{ acc_dt }}%</p>
            </div>
            <span class="relative flex h-3 w-3">
              <span class="relative inline-flex rounded-full h-3 w-3 bg-blue-500"></span>
            </span>
        </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-12 w-full max-w-6xl">
      
      <div class="relative group" data-aos="fade-right" data-aos-duration="1000">
         <div class="absolute -top-8 left-0 text-gray-500 text-sm font-bold">Decision Tree Visualization</div>
         
         <div class="absolute -inset-1 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg blur opacity-25 group-hover:opacity-75 transition duration-1000"></div>
         
         <div class="relative bg-gray-900 ring-1 ring-gray-900/5 rounded-lg flex items-center justify-center">
            <img src="{{ url_for('static', filename='img/decision_tree.png') }}" 
                 class="rounded-lg shadow-2xl w-full h-auto object-cover border border-gray-700 transform transition duration-500 group-hover:scale-[1.02]" 
                 alt="DT Viz" />
         </div>
      </div>

      <div class="relative group" data-aos="fade-left" data-aos-duration="1000">
         <div class="absolute -top-8 left-0 text-gray-500 text-sm font-bold">Naive Bayes Visualization</div>

         <div class="absolute -inset-1 bg-gradient-to-r from-teal-600 to-emerald-600 rounded-lg blur opacity-25 group-hover:opacity-75 transition duration-1000"></div>
         
         <div class="relative bg-gray-900 ring-1 ring-gray-900/5 rounded-lg flex items-center justify-center">
            <img src="{{ url_for('static', filename='img/naive_bayes.png') }}" 
                 class="rounded-lg shadow-2xl w-full h-auto object-cover border border-gray-700 transform transition duration-500 group-hover:scale-[1.02]" 
                 alt="NB Viz"/>
         </div>
      </div>

    </div>
  </div>


  <div class="bg-gray-800/30 border-y border-white/5 py-16">
    <div class="container mx-auto px-6 max-w-6xl">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-16">
            
            <div class="space-y-4" data-aos="fade-up" data-aos-delay="100">
                <h3 class="text-3xl text-center font-bold text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-blue-500">
                    Kesimpulan
                </h3>
                <p class="text-gray-400 leading-relaxed">
                    Berdasarkan hasil training, model terbaik adalah <span class="text-teal-400 font-bold">Naive Bayes</span> dengan akurasi 
                    <span class="text-white bg-teal-500/20 px-2 py-0.5 rounded">61%</span>. 
                    Sedangkan <span class="text-blue-400 font-bold">Decision Tree</span> memiliki akurasi yang lebih rendah sekitar <span class="bg-blue-500/20 px-2 py-0.5 font-bold">57%</span>. 
                    <br><br>
                    Untuk meningkatkan Decision Tree, perlu dilakukan tuning parameter seperti <code class="text-pink-400 text-sm">max_depth = 5</code> agar model tidak overfitting.
                </p>
            </div>

            <div class="space-y-4" data-aos="fade-up" data-aos-delay="200">
                <h3 class="text-3xl text-center font-bold text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-blue-500">
                    Refleksi
                </h3>
                <p class="text-gray-400 leading-relaxed">
                    Proyek ini menunjukkan bahwa algoritma yang lebih kompleks tidak selalu lebih baik. 
                    Distribusi data wine yang probabilistik ternyata lebih cocok ditangani oleh pendekatan statistik Naive Bayes dibandingkan struktur pohon keputusan yang kaku.
                </p>
            </div>

        </div>
    </div>
  </div>


  <div id="predict-section" class="bg-gray-900 py-20">
    <div class="container mx-auto px-6 max-w-4xl">
      
      <div class="text-center mb-10" data-aos="fade-up">
        <h3 class="text-3xl font-bold text-white">Mulai Prediksi</h3>
        <p class="text-gray-400 mt-2">
          Pilih algoritma dan masukkan parameter kimia.
        </p>
      </div>

      <!-- method post -->
      <form action="/predict" method="POST" class="bg-gray-800 p-8 rounded-2xl shadow-2xl border border-gray-700 relative overflow-hidden" data-aos="zoom-in" data-aos-duration="1000">
        
        <div class="absolute top-0 right-0 -mr-16 -mt-16 w-64 h-64 rounded-full bg-teal-500/5 blur-3xl"></div>

        <div class="mb-8">
            <label class="block text-sm font-bold text-teal-400 mb-2">Pilih Model Algoritma</label>
            <select name="algorithm" class="w-full bg-gray-900 text-white border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-teal-500 transition shadow-inner">
                <option value="naive_bayes">Naive Bayes (Akurasi Terbaik: {{ acc_nb }}%)</option>
                <option value="decision_tree">Decision Tree (Akurasi: {{ acc_dt }}%)</option>
            </select>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-xs text-gray-400 mb-1">Fixed Acidity</label>
            <input type="number" step="any" name="fa" required class="form-input w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-teal-500 focus:ring-1 focus:ring-teal-500 outline-none transition" placeholder="e.g. 7.4">
          </div>
          <div>
            <label class="block text-xs text-gray-400 mb-1">Volatile Acidity</label>
            <input type="number" step="any" name="va" required class="form-input w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-teal-500 outline-none transition" placeholder="e.g. 0.7">
          </div>
          <div>
            <label class="block text-xs text-gray-400 mb-1">Citric Acid</label>
            <input type="number" step="any" name="ca" required class="form-input w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-teal-500 outline-none transition">
          </div>
          <div>
            <label class="block text-xs text-gray-400 mb-1">Residual Sugar</label>
            <input type="number" step="any" name="rs" required class="form-input w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-teal-500 outline-none transition">
          </div>
          <div>
            <label class="block text-xs text-gray-400 mb-1">Chlorides</label>
            <input type="number" step="any" name="c" required class="form-input w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-teal-500 outline-none transition">
          </div>
          <div>
            <label class="block text-xs text-gray-400 mb-1">Free Sulfur Dioxide</label>
            <input type="number" step="any" name="fsd" required class="form-input w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-teal-500 outline-none transition">
          </div>
          <div>
            <label class="block text-xs text-gray-400 mb-1">Total Sulfur Dioxide</label>
            <input type="number" step="any" name="tsd" required class="form-input w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-teal-500 outline-none transition">
          </div>
          <div>
            <label class="block text-xs text-gray-400 mb-1">Density</label>
            <input type="number" step="any" name="d" required class="form-input w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-teal-500 outline-none transition">
          </div>
          <div>
            <label class="block text-xs text-gray-400 mb-1">pH</label>
            <input type="number" step="any" name="ph" required class="form-input w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-teal-500 outline-none transition">
          </div>
          <div>
            <label class="block text-xs text-gray-400 mb-1">Sulphates</label>
            <input type="number" step="any" name="s" required class="form-input w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-teal-500 outline-none transition">
          </div>
          <div class="md:col-span-2">
            <label class="block text-xs text-gray-400 mb-1">Alcohol</label>
            <input type="number" step="any" name="a" required class="form-input w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-teal-500 outline-none transition">
          </div>
        </div>

        <div class="mt-8 text-center">
          <button type="submit"
            class="w-full md:w-2/3 bg-gradient-to-r from-teal-500 to-blue-600 hover:from-teal-600 hover:to-blue-700 text-white font-bold py-4 rounded-lg shadow-lg transform transition hover:-translate-y-1 hover:shadow-teal-500/25">
            üîç JALANKAN PREDIKSI
          </button>
        </div>
      </form>

      {% if prediction_text %}
      <div id="result-section" class="mt-10 p-1 bg-gradient-to-r from-teal-500 via-blue-500 to-purple-500 rounded-xl shadow-2xl" data-aos="flip-up">
          <div class="bg-gray-900 rounded-lg p-8 text-center relative overflow-hidden h-full">
            <div class="absolute inset-0 bg-teal-500/5 animate-pulse"></div>
            
            <p class="text-sm text-gray-400 uppercase tracking-widest mb-2">Hasil Analisa</p>
            <h2 class="relative text-4xl font-extrabold text-white mb-2">
              {{ prediction_text }}
            </h2>

            <div class="w-16 h-1 bg-gradient-to-r from-teal-500 to-purple-500 mx-auto rounded mb-6">
            </div>
            <div class="relative grid grid-cols-2 gap-4 max-w-sm mx-auto">
              <div class="bg-gray-800/50 p-3 rounded-lg border border-gray-700 backdrop-blur-sm">
                <p class="text-gray-400 text-xs uppercase mb-1">Akurasi model</p>
                <p class="text-2xl font-bold text-teal-400">{{ model_acc }}</p>
              </div>

              <div class="bg-gray-800/50 p-3 rounded-lg border border-gray-700 backdrop-blur-sm">
                <p class="text-gray-400 text-xs uppercase mb-1">F1-Score</p>
                <p class="text-2xl font-bold text-teal-400">{{ model_f1}}</p>
              </div>
            </div>
          </div>
      </div>
      {% endif %}
    </div>
  </div>

  <footer class="bg-gray-900 py-8 text-center text-gray-600 text-sm border-t border-gray-800">
    <p>&copy; 2025 Wine Quality AI. Built with Flask & Tailwind. <span class="text-pink-400">Create By Fatkur Rizky</span></p>
  </footer>

  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    AOS.init({
        once: true, // Animasi hanya berjalan sekali saat scroll
        offset: 100
    });

  const form = document.querySelector('form');
  const btn = form.querySelector('button[type="submit"]');
  const originalText = btn.innerHTML;

  form.addEventListener('submit', function() {
      // Ubah tombol jadi loading saat diklik
      btn.innerHTML = `
        <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        Sedang Menghitung...
      `;
      btn.classList.add('opacity-75', 'cursor-not-allowed');
      btn.disabled = true; // Matikan tombol biar ga di-spam click
  });

document.addEventListener("DOMContentLoaded", function() {
      const resultElement = document.getElementById("result-section");

      if (resultElement) {
          setTimeout(() => {
              resultElement.scrollIntoView({ behavior: "smooth", block: "center" });
          }, 500);
      }
  });
  
    
  </script>
</body>
</html>